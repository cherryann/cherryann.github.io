<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>zalando article</title>

    <style type="text/css">

		.mod-article {
			max-width: 800px;
			margin: auto;
		}

	    .mod-article__item {
	    	width: 100%;
	    	float: left;
	    	padding: 50px;
	    	box-sizing: border-box;
	    	text-decoration: none;
	    }

		.mod-article__price,
		.mod-article__headline,
		.mod-article__category {
			font-family: Verdana;
			font-size: 16px;
			text-transform: uppercase;
			line-height: 1.2;
			color: #0c2959;
			display: block;
		}

		.mod-article__category {
			clear: both;
		}

		.mod-article__price {
			font-family: Arial;
			font-size: 14px;
			color: #0d5d68;
			margin-top: 10px;
		}

	    .mod-article__image {
	    	width: 100%;
	    	height: auto;
	    }

	    .mod-article__brand {
	    	display: block;
	    	margin-bottom: 20px;
	    }


	    @media only screen and (min-width : 500px) {
			.mod-article__item {
		    	width: 33.33%;
		    }
		}

		footer {
			position: fixed;
			bottom: 0;
			width: 100%;
		}

    </style>
  </head>
  <body>
	<div class="mod-article" id="modArticle"></div>

	<script type="text/javascript">
		var staticData = {
			"staticData": [{
				"category": "Schuhe",
				"article": ["pi912ba0k-k11", "ad112b0h9-c11", "ti315b01h-c11", "hu315a00n-802"]
			},
			{
				"category": "Jacken",
				"article": ["le222h00v-q11", "ja222h0aq-k11", "bh622ha0z-n11"]
			}]
		};

		var getJSON = function(url, callback) {
		    var xhr = new XMLHttpRequest();
		    xhr.open('GET', url, true);
		    xhr.responseType = 'json';
		    xhr.onload = function() {
		      var status = xhr.status;
		      if (status == 200) {
		        callback(null, xhr.response);
		      } else {
		        callback(status);
		      }
		    };
		    xhr.send();
		};

		var article = document.getElementsByClassName('js-article');
		var modArticle = document.getElementById('modArticle');
		var articleHeadline = document.getElementsByClassName('js-article-headline');
		var articleImage = document.getElementsByClassName('js-article-image');
		var articlePrice = document.getElementsByClassName('js-article-price');
		var articleBrand = document.getElementsByClassName('js-article-brand');
		var articleData = [];

		for (i = 0; i < staticData.staticData.length; i++) {
			var createCategory = '<h2 class="mod-article__category">'+ staticData.staticData[i].category +'</h2>'
			modArticle.innerHTML += createCategory;
    	for (k = 0; k < staticData.staticData[i].article.length; k++) {
			var createArticle = '<a href="#" target="_blank" class="mod-article__item js-article" data-article="'+ staticData.staticData[i].article[k] +'">' +
				'<img src="" class="mod-article__image js-article-image" />' +
				'<img src="" class="mod-article__brand js-article-brand" />' +
				'<span class="mod-article__headline js-article-headline"></span>' +
				'<span class="mod-article__price js-article-price"></span>' +
				'</a>';
			modArticle.innerHTML += createArticle;
			}
   		}

   		setTimeout(function(){ 
			for(var i=0;typeof(article[i])!='undefined';articleData.push(article[i++]));

			articleData.forEach(function(eachArticle, index) {
			    getJSON('https://api.zalando.com/articles/' + eachArticle.dataset.article,
				function(err, data) {
					var brand = data.brand.logoUrl;
					var name = data.name;
					var price = data.units[0].price.formatted;
					var showUrl = data.shopUrl;
					var image = data.media.images[0].largeUrl;

					article[index].href = showUrl;
					articleHeadline[index].innerHTML = name;
					articleImage[index].src = image;
					articlePrice[index].innerHTML = price;
					articleBrand[index].src = brand;
				});
			});
		});
	</script>
  </body>
</html>